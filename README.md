The purpose of this code is to reproduce the trading methodology proposed in “A New Anomaly: The Cross-Sectional Profitability of Technical Analysis” by Yufeng Han, Ke Yang, Guofu Zhou.

The paper is available at: https://papers.ssrn.com/sol3/papers.cfm?abstract_id=1656460

The key analytical technique for the strategy that we will replicate is as follows:

1.   Obtain the list of stocks (in the study, all stocks listed on the NYSE/Amex were used).
2.   Sort each stock by their volatility, measured as the standard deviations of daily returns within a given year. Divide these stocks into ten equal deciles, or groups. This means that the first decile has the stocks with the lowest 10% volatility, and the tenth decile has the stocks with the highest 10% volatility. Each stock is equally weighted in a decile portfolio, and each year the portfolios are rebalanced according to the updated volatility.
3.   For each decile portfolio, compute the 10-day moving average of the daily closing prices (or index levels) of the portfolio. Each day, if a portfolio's current price is above its 10-day MA, the signal is to buy or hold the portfolio. If below, the signal is to switch to the risk-free asset. Apply the MA timing strategy daily for each decile portfolio, moving between the portfolio and a risk-free asset based on the timing signals.
4. Track the returns generated by the MA timing strategy for each decile portfolio. The paper uses the CAPM and Fama-French three-factor models to calculate risk-adjusted returns (alphas) of the MA timing strategy for comparison against the benchmark (buy-and-hold strategy).
